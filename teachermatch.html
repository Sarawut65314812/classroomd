<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Teachermath Setup</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="css/teachermatch.css">
<style>
* {
  font-family: 'Roboto', sans-serif !important;
}
body {
  text-align: center;
  margin: 0;
  padding: 20px;
  position: relative;
  min-height: 100vh;
  overflow-x: hidden;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
}

body::before {
  content: '';
  position: fixed;
  top: 0; 
  left: 0; 
  right: 0; 
  bottom: 0;
  background: linear-gradient(to bottom, #ebd09e 0%, #251f03 100%);
  z-index: -1;
}
input, button { font-size:16px; margin:5px; padding:10px; text-transform: lowercase; border-radius:15px; border:2px solid #ccc; }
textarea {
  font-size:16px; margin:5px; padding:10px; width:250px; height:120px; resize:none;
  border:2px solid #ccc; border-radius:15px;
  background: repeating-linear-gradient(
    to bottom,
    #fff,
    #fff 28px,
    #ccc 28px,
    #ccc 30px
  );
  line-height:30px;
  text-transform: lowercase; /* ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏≠‡∏∞‡πÑ‡∏£‡∏Å‡πá‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡πá‡∏Å */
}
button { cursor:pointer; }
.image-preview-item {
  display: inline-block;
  margin: 10px;
  position: relative;
  border: 2px solid #ddd;
  border-radius: 10px;
  overflow: hidden;
  width: 120px;
  height: 120px;
  background: repeating-conic-gradient(#ddd 0% 25%, transparent 0% 50%) 50% / 20px 20px;
}
.image-preview-item img {
  width: 100%;
  height: 100%;
  object-fit: contain;
}
.image-preview-item .remove-btn {
  position: absolute;
  top: 5px;
  right: 5px;
  background: #f44336;
  color: white;
  border: none;
  border-radius: 50%;
  width: 25px;
  height: 25px;
  cursor: pointer;
  font-size: 16px;
  line-height: 1;
}
.file-input-wrapper {
  position: relative;
  display: inline-block;
  margin: 10px;
}
.file-input-wrapper input[type=file] {
  position: absolute;
  opacity: 0;
  width: 100%;
  height: 100%;
  cursor: pointer;
}

.neon-btn-green, .file-input-label {
  background: linear-gradient(180deg, #57e167 0%, #57e167 45%, #57e167 55%, #57e167 100%);
  color: #000000;
  border: 6px solid #74640a;
  border-radius: 9999px;
  box-shadow: 1px 1px 0 #000, -8px 6px #3b3305, 0 0 20px rgba(255,230,160,0.55);
  font-weight: 700;
  font-size: clamp(1rem, 2vw, 1.5rem);
  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.3), 0 -1px 0 rgba(0, 0, 0, 0.1);
  position: relative;
  padding: clamp(14px, 2.5vw, 20px) clamp(35px, 5vw, 50px);
  transform: translateZ(0);
  transition: all 0.3s ease;
  z-index: 10;
  min-height: 55px;
  display: inline-block;
  cursor: pointer;
}

/* Neon Button Style */
.neon-btn, .file-input-label {
  background: linear-gradient(180deg, #f8f6f0 0%, #fffef8 45%, #fff8e8 55%, #f5f0e5 100%);
  color: #000000;
  border: 6px solid #74640a;
  border-radius: 9999px;
  box-shadow: 1px 1px 0 #000, -8px 6px #3b3305, 0 0 20px rgba(255,230,160,0.55);
  font-weight: 700;
  font-size: clamp(1rem, 2vw, 1.5rem);
  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.3), 0 -1px 0 rgba(0, 0, 0, 0.1);
  position: relative;
  padding: clamp(14px, 2.5vw, 20px) clamp(35px, 5vw, 50px);
  transform: translateZ(0);
  transition: all 0.3s ease;
  z-index: 10;
  min-height: 55px;
  display: inline-block;
  cursor: pointer;
}

.neon-btn:hover, .file-input-label:hover {
  transform: translateY(-2px);
  box-shadow: 2px 2px 0 #000, -10px 8px #3b3305, 0 0 25px rgba(255,230,160,0.75);
}

.file-input-label {
  padding: 10px 20px;
  font-size: 16px;
}
.choice-item {
  background: #f0f0f0;
  padding: 8px;
  margin: 5px 0;
  border-radius: 5px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.choice-item button {
  background: #f44336;
  color: white;
  border: none;
  padding: 5px 10px;
  border-radius: 3px;
  cursor: pointer;
  font-size: 12px;
}

/* Responsive Design */
.info-inputs {
  display: flex;
  gap: 5px;
  justify-content: center;
  margin: 10px 0 20px 0;
  flex-wrap: wrap;
}

.info-inputs input {
  width: 120px;
  font-size: 16px;
  padding: 10px;
  border-radius: 15px;
}

.info-inputs input:nth-child(1) {
  width: 120px;
}

.info-inputs input:nth-child(2),
.info-inputs input:nth-child(3),
.info-inputs input:nth-child(4) {
  width: 180px;
}

.main-container {
  max-width: 900px;
  width: 100%;
  background: rgba(255,255,255,0.9);
  padding: 20px;
  border-radius: 10px;
  border: 4px solid #74640a;
  box-shadow: 0 0 15px rgba(255,230,160,0.5), 1px 1px 0 #000, -6px 4px #3b3305;
}

/* Mobile: < 768px */
@media (max-width: 767px) {
  body {
    padding: 5px;
  }
  
  h2 {
    font-size: 18px;
    margin: 10px 0;
  }
  
  h3 {
    font-size: 16px;
    margin: 10px 0;
  }
  
  .info-section {
  padding: 10px 15px !important;
  max-width: 91% !important;
  width: 91% !important;
    border: 3px solid #74640a !important;
    box-sizing: border-box !important;
    margin: 5px auto !important;
  }
  
  .info-inputs {
    gap: 3px;
  }
  
  .info-inputs input {
    width: calc(50% - 3px) !important;
    font-size: 12px !important;
    padding: 6px !important;
    box-sizing: border-box;
  }
  
  .main-container {
    padding: 6px;
    max-width: 85%;
    width: 85%;
    border: 3px solid #74640a;
  }
  
  .main-container input {
    font-size: 14px !important;
    padding: 6px !important;
    max-width: 100% !important;
  }
  
  .main-container label {
    font-size: 12px !important;
  }
  
  .main-container > div[style*="display:flex"] {
    flex-direction: column;
    gap: 6px !important;
  }
  
  .main-container > div[style*="display:flex"] > div {
    width: calc(100% - 4px) !important;
    padding: 6px !important;
    box-sizing: border-box !important;
    max-width: 100% !important;
    margin: 0 2px !important;
  }
  
  .main-container > div[style*="display:flex"] > div input {
    max-width: calc(100% - 4px) !important;
    width: calc(100% - 4px) !important;
    box-sizing: border-box !important;
  }
  
  .neon-btn, .neon-btn-green {
    font-size: 12px !important;
    padding: 6px 12px !important;
    min-height: 35px !important;
  }
}

/* Tablet: 768px - 1024px */
@media (min-width: 768px) and (max-width: 1024px) {
  .info-inputs input:nth-child(1) {
    width: 100px;
  }
  
  .info-inputs input:nth-child(2),
  .info-inputs input:nth-child(3),
  .info-inputs input:nth-child(4) {
    width: 150px;
  }
}

/* Desktop: > 1024px */
@media (min-width: 1025px) {
  .info-inputs input:nth-child(1) {
    width: 120px;
  }
  
  .info-inputs input:nth-child(2),
  .info-inputs input:nth-child(3),
  .info-inputs input:nth-child(4) {
    width: 180px;
  }
}

.info-section {
  background: rgba(255,255,255,0.9);
  padding: 20px;
  border-radius: 10px;
  border: 4px solid #74640a;
  box-shadow: 0 0 15px rgba(255,230,160,0.5), 1px 1px 0 #000, -6px 4px #3b3305;
  margin-bottom: 20px;
  max-width: 900px;
  width: 100%;
}

.info-section h2 {
  margin-top: 0;
}
</style>
</head>
<body>

<div class="info-section">
  <h1>‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÄ‡∏•‡∏Ç</h1>
  <h3>‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</h3>
  
  <div class="info-inputs">
    <input id="weekInput" placeholder="‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà">
    <input id="topicInput" placeholder="‡∏™‡∏≤‡∏£‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ">
    <input id="unitInput" placeholder="‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ">
    <input id="teacherInput" placeholder="‡∏Ñ‡∏£‡∏π‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö">
  </div>
</div>

<div class="main-container">
  <h3>‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</h3>
  <input id="questionInput" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÄ‡∏•‡∏Ç (‡πÄ‡∏ä‡πà‡∏ô 2 + 2 = ?)" style="max-width:500px; font-size:18px; padding:12px; border-radius:15px; margin-bottom:20px;"><br>
  <div style="display:flex; gap:5px; justify-content:center; margin-top:20px;">
    <div style="flex:1; background:rgba(76, 175, 80, 0.1); padding:15px; border-radius:10px; border:2px solid #4CAF50;">
      <label style="color:#4CAF50; font-weight:bold;">‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‚úÖ</label><br>
      <input id="correctAnswerInput" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å (‡πÄ‡∏ä‡πà‡∏ô 4)" style="max-width:300px; font-size:18px; padding:10px; margin:10px 0; border-radius:15px;">
      <button class="neon-btn" onclick="addAnswer('correct')" style="font-size:14px; padding:8px 16px; min-height:40px;">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
      <div id="correctAnswersList" style="margin-top:10px;"></div>
    </div>
    
    <div style="flex:1; background:rgba(244, 67, 54, 0.1); padding:15px; border-radius:10px; border:2px solid #f44336;">
      <label style="color:#f44336; font-weight:bold;">‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ú‡∏¥‡∏î ‚ùå</label><br>
      <input id="wrongAnswerInput" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ú‡∏¥‡∏î (‡πÄ‡∏ä‡πà‡∏ô 3, 5, 6)" style="max-width:300px; font-size:18px; padding:10px; margin:10px 0; border-radius:15px;">
      <button class="neon-btn" onclick="addAnswer('wrong')" style="font-size:14px; padding:8px 16px; min-height:40px;">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
      <div id="wrongAnswersList" style="margin-top:10px;"></div>
    </div>
  </div>
  
  <button class="neon-btn-green" onclick="addQuestion()" style="margin-top:20px; font-size:14px; padding:8px 16px; min-height:40px;">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏à‡∏ó‡∏¢‡πå</button>
  
  <hr style="margin:30px 0; border:none; border-top:2px solid #ccc;">
  
  <h3>‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (<span id="questionCount">0</span> ‡∏Ç‡πâ‡∏≠)</h3>
  <div id="questionsList" style="max-height:400px; overflow-y:auto;"></div>
</div>

<!-- Control Buttons -->
<div style="display: flex; justify-content: center; gap: 15px; margin: 20px auto; max-width: 900px; flex-wrap: wrap;">
  <button class="neon-btn" onclick="saveConfig()" style="font-size: clamp(0.9rem, 1.8vw, 1.2rem); padding: 12px 25px;">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</button>
  <button class="neon-btn" onclick="saveActivity()" style="font-size: clamp(0.9rem, 1.8vw, 1.2rem); padding: 12px 25px;">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</button>
  <button class="neon-btn" onclick="loadActivity()" style="font-size: clamp(0.9rem, 1.8vw, 1.2rem); padding: 12px 25px;">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</button>
</div>

<!-- Activity Selection Modal -->
<div id="activityModal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); z-index: 9999; align-items: center; justify-content: center;">
  <div style="background: linear-gradient(135deg, #f8f6f0 0%, #ebd09e 100%); padding: 30px; border-radius: 20px; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto; border: 5px solid #74640a;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
      <h2 style="margin: 0; color: #251f03;">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ</h2>
      <button onclick="closeActivityModal()" style="background: #e74c3c; color: white; border: none; border-radius: 50%; width: 40px; height: 40px; cursor: pointer; font-size: 20px;">‚úñ</button>
    </div>
    <div id="activityList"></div>
  </div>
</div>

<script>
let correctAnswers = [];
let wrongAnswers = [];
let allQuestions = []; // ‡πÄ‡∏Å‡πá‡∏ö‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
function addAnswer(type) {
  const inputId = type === 'correct' ? 'correctAnswerInput' : 'wrongAnswerInput';
  const input = document.getElementById(inputId);
  const answer = input.value.trim();
  
  if (!answer) {
    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö');
    return;
  }
  
  if (type === 'correct') {
    correctAnswers.push(answer);
    renderAnswers('correct');
  } else {
    wrongAnswers.push(answer);
    renderAnswers('wrong');
  }
  
  input.value = ''; // Clear input
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
function removeAnswer(type, index) {
  if (type === 'correct') {
    correctAnswers.splice(index, 1);
    renderAnswers('correct');
  } else {
    wrongAnswers.splice(index, 1);
    renderAnswers('wrong');
  }
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
function renderAnswers(type) {
  const listId = type === 'correct' ? 'correctAnswersList' : 'wrongAnswersList';
  const answers = type === 'correct' ? correctAnswers : wrongAnswers;
  const list = document.getElementById(listId);
  
  list.innerHTML = answers.map((answer, i) => `
    <div class="choice-item">
      <span style="font-size:18px; font-weight:bold;">${answer}</span>
      <button onclick="removeAnswer('${type}', ${i})">‡∏•‡∏ö</button>
    </div>
  `).join('');
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏à‡∏ó‡∏¢‡πå
function addQuestion() {
  const question = document.getElementById('questionInput').value.trim();
  
  if (!question) {
    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÄ‡∏•‡∏Ç');
    return;
  }
  
  if (correctAnswers.length === 0) {
    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö');
    return;
  }
  
  if (wrongAnswers.length === 0) {
    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ú‡∏¥‡∏î‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö');
    return;
  }
  
  // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÄ‡∏Ç‡πâ‡∏≤ array
  allQuestions.push({
    question: question,
    correctAnswers: [...correctAnswers],
    wrongAnswers: [...wrongAnswers]
  });
  
  // Clear form
  document.getElementById('questionInput').value = '';
  correctAnswers = [];
  wrongAnswers = [];
  renderAnswers('correct');
  renderAnswers('wrong');
  
  // ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÇ‡∏à‡∏ó‡∏¢‡πå
  renderQuestionsList();
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
function renderQuestionsList() {
  const list = document.getElementById('questionsList');
  document.getElementById('questionCount').innerText = allQuestions.length;
  
  list.innerHTML = `<div style="display:grid; grid-template-columns:repeat(auto-fill, minmax(150px, 1fr)); gap:8px;">` + 
    allQuestions.map((q, i) => `
      <div style="background:rgba(255,255,255,0.9); padding:8px; border-radius:6px; border:2px solid #74640a;">
        <div style="display:flex; justify-content:space-between; align-items:start; gap:5px;">
          <div style="flex:1; text-align:left;">
            <div style="margin:0 0 4px 0; color:#333; font-weight:bold; font-size:13px;">‡∏Ç‡πâ‡∏≠ ${i + 1}: ${q.question}</div>
            <div style="margin:2px 0; font-size:12px;">
              <span style="color:#4CAF50; font-weight:bold;">‚úì</span> ${q.correctAnswers.join(', ')}
            </div>
            <div style="margin:2px 0; font-size:12px;">
              <span style="color:#f44336; font-weight:bold;">‚úó</span> ${q.wrongAnswers.join(', ')}
            </div>
          </div>
          <button onclick="removeQuestion(${i})" style="background:#f44336; color:white; border:none; padding:4px 8px; border-radius:4px; cursor:pointer; font-size:11px;">‡∏•‡∏ö</button>
        </div>
      </div>
    `).join('') + `</div>`;
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡∏ö‡πÇ‡∏à‡∏ó‡∏¢‡πå
function removeQuestion(index) {
  if (confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ô‡∏µ‡πâ?')) {
    allQuestions.splice(index, 1);
    renderQuestionsList();
  }
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î (‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï)
function handleImageUpload(event, type) {
  const file = event.target.files[0];
  if (!file) return;

  const reader = new FileReader();
  reader.onload = function(e) {
    const img = new Image();
    img.onload = function() {
      // Auto crop to square
      const croppedImageData = autoCropToSquare(img);
      
      // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏π‡∏õ‡πÄ‡∏Ç‡πâ‡∏≤‡∏≠‡∏≤‡∏£‡πå‡πÄ‡∏£‡∏¢‡πå
      if (type === 'correct') {
        correctImages.push(croppedImageData);
        event.target.value = ''; // Clear input
        renderImages('correct');
      } else {
        wrongImages.push(croppedImageData);
        event.target.value = ''; // Clear input
        renderImages('wrong');
      }
    };
    img.src = e.target.result;
  };
  reader.readAsDataURL(file);
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
function autoCropToSquare(img) {
  const canvas = document.createElement('canvas');
  const ctx = canvas.getContext('2d');
  
  // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î
  const maxSize = 300;
  let width = img.width;
  let height = img.height;
  
  // ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏ñ‡πâ‡∏≤‡∏£‡∏π‡∏õ‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ ‡πÇ‡∏î‡∏¢‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô
  if (width > maxSize || height > maxSize) {
    if (width > height) {
      height = (height / width) * maxSize;
      width = maxSize;
    } else {
      width = (width / height) * maxSize;
      height = maxSize;
    }
  }
  
  canvas.width = width;
  canvas.height = height;
  
  // ‡∏ß‡∏≤‡∏î‡∏£‡∏π‡∏õ‡∏•‡∏á‡∏ö‡∏ô canvas
  ctx.drawImage(img, 0, 0, width, height);
  
  // ‡∏ï‡∏±‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á
  const imageData = ctx.getImageData(0, 0, width, height);
  const data = imageData.data;
  
  // ‡∏´‡∏≤‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á (‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡∏°‡∏∏‡∏° 4 ‡∏°‡∏∏‡∏°)
  const corners = [
    [0, 0], // ‡∏°‡∏∏‡∏°‡∏ã‡πâ‡∏≤‡∏¢‡∏ö‡∏ô
    [width - 1, 0], // ‡∏°‡∏∏‡∏°‡∏Ç‡∏ß‡∏≤‡∏ö‡∏ô
    [0, height - 1], // ‡∏°‡∏∏‡∏°‡∏ã‡πâ‡∏≤‡∏¢‡∏•‡πà‡∏≤‡∏á
    [width - 1, height - 1] // ‡∏°‡∏∏‡∏°‡∏Ç‡∏ß‡∏≤‡∏•‡πà‡∏≤‡∏á
  ];
  
  let bgColor = null;
  for (let corner of corners) {
    const x = corner[0];
    const y = corner[1];
    const index = (y * width + x) * 4;
    const r = data[index];
    const g = data[index + 1];
    const b = data[index + 2];
    
    if (r > 200 && g > 200 && b > 200) { // ‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á
      bgColor = { r, g, b };
      break;
    }
  }
  
  // ‡∏ï‡∏±‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏≠‡∏≠‡∏Å (‡∏ñ‡πâ‡∏≤‡πÄ‡∏à‡∏≠‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á)
  if (bgColor) {
    const threshold = 40; // ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πà‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏™‡∏µ
    for (let i = 0; i < data.length; i += 4) {
      const r = data[i];
      const g = data[i + 1];
      const b = data[i + 2];
      
      // ‡∏ñ‡πâ‡∏≤‡∏™‡∏µ‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡∏Å‡∏±‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á ‡πÉ‡∏´‡πâ‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™
      if (Math.abs(r - bgColor.r) < threshold && 
          Math.abs(g - bgColor.g) < threshold && 
          Math.abs(b - bgColor.b) < threshold) {
        data[i + 3] = 0; // ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™
      }
    }
    
    ctx.putImageData(imageData, 0, 0);
  }
  
  // ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô base64 (‡πÉ‡∏ä‡πâ PNG ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™)
  return canvas.toDataURL('image/png', 0.9);
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
function removeImage(type, index) {
  if (type === 'correct') {
    correctImages.splice(index, 1);
    renderImages('correct');
  } else {
    wrongImages.splice(index, 1);
    renderImages('wrong');
  }
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
function renderImages(type) {
  const listId = type === 'correct' ? 'correctImagesList' : 'wrongImagesList';
  const images = type === 'correct' ? correctImages : wrongImages;
  const list = document.getElementById(listId);
  
  list.innerHTML = images.map((imgData, i) => `
    <div class="image-preview-item">
      <img src="${imgData}" alt="Image ${i+1}">
      <button class="remove-btn" onclick="removeImage('${type}', ${i})">√ó</button>
    </div>
  `).join('');
}

// ‡πÇ‡∏´‡∏•‡∏î config ‡πÄ‡∏Å‡πà‡∏≤‡∏ñ‡πâ‡∏≤‡∏°‡∏µ
const savedConfig = JSON.parse(localStorage.getItem('emojiGameConfig')||'{}');
if(savedConfig.week) document.getElementById('weekInput').value = savedConfig.week;
if(savedConfig.topic) document.getElementById('topicInput').value = savedConfig.topic;
if(savedConfig.unit) document.getElementById('unitInput').value = savedConfig.unit;
if(savedConfig.teacher) document.getElementById('teacherInput').value = savedConfig.teacher;
if(savedConfig.questions) {
  allQuestions = savedConfig.questions;
  renderQuestionsList();
}
renderAnswers('correct');
renderAnswers('wrong');

function saveConfig(){
  const week = document.getElementById('weekInput').value.trim();
  const topic = document.getElementById('topicInput').value.trim();
  const unit = document.getElementById('unitInput').value.trim();
  const teacher = document.getElementById('teacherInput').value.trim();
  // Allow saving even with missing fields ‚Äî use defaults
  const cfgWeek = week || '-';
  const cfgTopic = topic || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏';
  const cfgUnit = unit || '-';
  const cfgTeacher = teacher || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏';
  if (allQuestions.length === 0) console.warn('[SAVE] Saving config with 0 questions');

  // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å config ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (accept empty questions)
  const config = {
    week: cfgWeek,
    topic: cfgTopic,
    unit: cfgUnit,
    teacher: cfgTeacher,
    questions: allQuestions || []  // ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏õ‡πá‡∏ô array ‡∏Ç‡∏≠‡∏á‡πÇ‡∏à‡∏ó‡∏¢‡πå
  };
  localStorage.setItem('emojiGameConfig', JSON.stringify(config));

  // ‡πÄ‡∏î‡πâ‡∏á‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏Å‡∏°
  window.location.href='gamemath.html';
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°
function saveActivity() {
  const week = document.getElementById('weekInput').value.trim();
  const topic = document.getElementById('topicInput').value.trim();
  const unit = document.getElementById('unitInput').value.trim();
  const teacher = document.getElementById('teacherInput').value.trim();
  // Allow partial data ‚Äî apply defaults where missing
  const cfgWeek = week || '-';
  const cfgTopic = topic || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏';
  const cfgUnit = unit || '-';
  const cfgTeacher = teacher || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏';
  if (allQuestions.length === 0) console.warn('[SAVE ACTIVITY] saving activity with 0 questions');
  let savedActivities = JSON.parse(localStorage.getItem('savedActivities') || '[]');
  
  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÄ‡∏î‡∏¥‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
  if (window.editingActivityId) {
    const activity = savedActivities.find(a => a.id === window.editingActivityId);
    
    if (activity) {
      // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÄ‡∏î‡∏¥‡∏°
      activity.config = {
        week: cfgWeek,
        topic: cfgTopic,
        unit: cfgUnit,
        teacher: cfgTeacher,
        questions: allQuestions || []
      };
      activity.topic = cfgTopic;
      activity.savedAtDisplay = new Date().toLocaleString('th-TH');
      
      localStorage.setItem('savedActivities', JSON.stringify(savedActivities));
      
      alert(`‚úÖ ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° "${activity.name}" ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!`);
      
      // ‡∏•‡πâ‡∏≤‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
      delete window.editingActivityId;
      delete window.editingActivityName;
      return;
    }
  }
  
  // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÉ‡∏´‡∏°‡πà
  const activityName = prompt('‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°:', `${cfgTopic} - ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå ${cfgWeek}`);
  
  if (!activityName) return;
  
  const activity = {
    id: Date.now(),
    name: activityName,
    type: 'math',
    topic: cfgTopic,
    config: {
      week: cfgWeek,
      topic: cfgTopic,
      unit: cfgUnit,
      teacher: cfgTeacher,
      questions: allQuestions || []
    },
    savedAt: new Date().toISOString(),
    savedAtDisplay: new Date().toLocaleString('th-TH')
  };
  
  savedActivities.push(activity);
  localStorage.setItem('savedActivities', JSON.stringify(savedActivities));
  
  alert(`‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° "${activityName}" ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!`);
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÇ‡∏´‡∏•‡∏î‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°
function loadActivity() {
  const savedActivities = JSON.parse(localStorage.getItem('savedActivities') || '[]');
  const mathActivities = savedActivities.filter(a => a.type === 'math');
  
  if (mathActivities.length === 0) {
    alert('‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ');
    return;
  }
  
  const activityList = document.getElementById('activityList');
  activityList.innerHTML = mathActivities.map(activity => `
    <div style="background: white; padding: 15px; border-radius: 10px; margin-bottom: 10px; border: 3px solid #74640a; transition: transform 0.2s;" 
         onmouseover="this.style.transform='scale(1.02)'"
         onmouseout="this.style.transform='scale(1)'">
      <div style="display: flex; justify-content: space-between; align-items: start;">
        <div style="flex: 1; cursor: pointer;" onclick="playActivity(${activity.id})">
          <h3 style="margin: 0 0 8px 0; color: #333; font-size: 18px;">üìö ${activity.name}</h3>
          <p style="margin: 4px 0; color: #666; font-size: 14px;">‡∏™‡∏≤‡∏£‡∏∞: ${activity.topic}</p>
          <p style="margin: 4px 0; color: #999; font-size: 12px;">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å: ${activity.savedAtDisplay}</p>
          <p style="margin: 4px 0; color: #667eea; font-size: 14px; font-weight: 600;">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÇ‡∏à‡∏ó‡∏¢‡πå: ${activity.config.questions?.length || 0} ‡∏Ç‡πâ‡∏≠</p>
        </div>
        <div style="display: flex; gap: 8px;">
          <button onclick="event.stopPropagation(); editActivity(${activity.id})" 
                  style="background: #3498db; color: white; border: none; border-radius: 50%; width: 35px; height: 35px; cursor: pointer; font-size: 18px;">
            ‚úèÔ∏è
          </button>
          <button onclick="event.stopPropagation(); deleteActivity(${activity.id})" 
                  style="background: #e74c3c; color: white; border: none; border-radius: 50%; width: 35px; height: 35px; cursor: pointer; font-size: 18px;">
            üóëÔ∏è
          </button>
        </div>
      </div>
    </div>
  `).join('');
  
  document.getElementById('activityModal').style.display = 'flex';
}

// ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°
function selectActivity(activityId) {
  const savedActivities = JSON.parse(localStorage.getItem('savedActivities') || '[]');
  const activity = savedActivities.find(a => a.id === activityId);
  
  if (!activity) {
    alert('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ô‡∏µ‡πâ');
    return;
  }
  
  // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á‡πÉ‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏°
  const config = activity.config;
  document.getElementById('weekInput').value = config.week || '';
  document.getElementById('topicInput').value = config.topic || '';
  document.getElementById('unitInput').value = config.unit || '';
  document.getElementById('teacherInput').value = config.teacher || '';
  
  allQuestions = config.questions || [];
  renderQuestionsList();
  
  closeActivityModal();
  
  alert(`‚úÖ ‡πÇ‡∏´‡∏•‡∏î‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏• "${activity.name}" ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!`);
}

// ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (navigate to the appropriate game page)
function playActivity(activityId) {
  const savedActivities = JSON.parse(localStorage.getItem('savedActivities') || '[]');
  const activity = savedActivities.find(a => a.id === activityId);
  if (!activity) { alert('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ô‡∏µ‡πâ'); return; }

  // Save config for the game page and navigate based on activity type
  localStorage.setItem('emojiGameConfig', JSON.stringify(activity.config));
  const type = activity.type || 'math';
  if (type === 'math') {
    window.location.href = 'gamemath.html';
  } else if (type === 'picture') {
    window.location.href = 'gamepicture.html';
  } else if (type === 'thai') {
    window.location.href = 'gamethai.html';
  } else {
    // default to math
    window.location.href = 'gamemath.html';
  }
}

// ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°
function editActivity(activityId) {
  const savedActivities = JSON.parse(localStorage.getItem('savedActivities') || '[]');
  const activity = savedActivities.find(a => a.id === activityId);
  
  if (!activity) {
    alert('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ô‡∏µ‡πâ');
    return;
  }
  
  // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á‡πÉ‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
  const config = activity.config;
  document.getElementById('weekInput').value = config.week || '';
  document.getElementById('topicInput').value = config.topic || '';
  document.getElementById('unitInput').value = config.unit || '';
  document.getElementById('teacherInput').value = config.teacher || '';
  
  allQuestions = config.questions || [];
  renderQuestionsList();
  
  // ‡πÄ‡∏Å‡πá‡∏ö ID ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
  window.editingActivityId = activityId;
  window.editingActivityName = activity.name;
  
  closeActivityModal();
  
  // ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ß‡πà‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
  alert(`üìù ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° "${activity.name}"\n\n‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î "üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï`);
}

// ‡∏•‡∏ö‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°
function deleteActivity(activityId) {
  if (!confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) return;
  
  let savedActivities = JSON.parse(localStorage.getItem('savedActivities') || '[]');
  savedActivities = savedActivities.filter(a => a.id !== activityId);
  localStorage.setItem('savedActivities', JSON.stringify(savedActivities));
  
  loadActivity();
}

// ‡∏õ‡∏¥‡∏î Modal
function closeActivityModal() {
  document.getElementById('activityModal').style.display = 'none';
}

</script>

<!-- Socket client (connect + heartbeat) -->
<script src="/socket.io/socket.io.js"></script>
<script src="/socket-client.js"></script>
</body>
</html>
